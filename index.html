<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>プロサッカークラブをみちびこう！</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1E3A8A">
</head>
<body>

    <header>プロサッカークラブをみちびこう！</header>

    <div class="container">
        <div class="team-management">
            <div class="tab-input-group">
                <input type="text" id="newTeamInput" placeholder="新しいクラブ名を入力">
                <button id="addTeamBtn" class="btn-tab-add">クラブ追加</button>
            </div>
            <div class="team-pills-container" id="teamTabsContainer">
                </div>
        </div>

        <button class="btn" id="toggleFormBtn">＋ 新しい選手を登録</button>

        <div id="addPlayerForm">
            <div class="form-group">
                <label for="pName">選手名</label>
                <input type="text" id="pName" placeholder="例: 本田圭佑">
            </div>

            <div class="form-group">
                <label for="pRating">総合力</label>
                <div class="rating-input-group">
                    <button type="button" class="spin-btn" id="btnRatingDown">－</button>
                    <input type="number" id="pRating" value="4500" min="0">
                    <button type="button" class="spin-btn" id="btnRatingUp">＋</button>
                </div>
            </div>

            <div class="form-group">
                <label>ポジション</label>
                <div class="custom-select-wrapper" id="posSelectWrapper">
                    <div class="custom-select-trigger" id="posSelectTrigger">
                        <span id="posSelectLabel">選択してください</span>
                        <span class="arrow">▼</span>
                    </div>
                    <div class="custom-options" id="posOptionsList">
                        </div>
                </div>
                <input type="hidden" id="pPos" value="">
            </div>

            <div class="form-group">
                <label>ポジション適性マップ（色を選んでタップ）</label>
                <div class="aptitude-palette">
                    <div class="palette-btn apt-red selected" data-color="red">最適</div>
                    <div class="palette-btn apt-orange" data-color="orange">可能</div>
                    <div class="palette-btn apt-yellow" data-color="yellow">弱め</div>
                    <div class="palette-btn apt-none" data-color="none">無理</div>
                </div>
                
                <div class="pitch-grid" id="formPitchGrid">
                    </div>
            </div>

            <div class="form-group">
                <label>成長フェーズ</label>
                <div class="phase-group" id="phaseGroup">
                    <div class="phase-btn" data-phase="成長準備期">成長準備期</div>
                    <div class="phase-btn" data-phase="成長期">成長期</div>
                    <div class="phase-btn" data-phase="安定期">安定期</div>
                    <div class="phase-btn" data-phase="円熟期">円熟期</div>
                </div>
            </div>

            <div class="form-group">
                <label>アビリティ発動条件（複数選択可）</label>
                <div class="ability-condition-group" id="abilityConditionGroup">
                    <div class="ability-btn" data-cond="HOME">HOME</div>
                    <div class="ability-btn" data-cond="AWAY">AWAY</div>
                    <div class="ability-btn" data-cond="CUP">CUP</div>
                    
                    <div class="flex-break"></div>

                    <div class="ability-btn" data-cond="途中出場">途中出場</div>
                    <div class="ability-btn" data-cond="勝っている">勝っている</div>
                    <div class="ability-btn" data-cond="負けている">負けている</div>
                </div>
            </div>

            <div class="form-group" id="chemistryGroup" style="display: none; margin-top: 20px;">
                <label>相性の良い選手</label>
                
                <div class="custom-select-wrapper" id="chemSelectWrapper" style="margin-top: 5px;">
                    <div class="custom-select-trigger" id="chemSelectTrigger" style="background-color: rgba(31, 41, 55, 0.9); border: 1px solid rgba(255,255,255,0.2);">
                        <span id="chemSelectLabel">選手を選択（複数可）▼</span>
                    </div>
                    <div class="custom-options" id="chemistryList" style="max-height: 200px; overflow-y: auto;">
                        </div>
                </div>

                <div id="chemTagsArea" style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px;">
                    </div>
            </div>

            <div style="display: flex; gap: 10px;">
                <button class="btn btn-cancel" id="cancelFormBtn" style="flex: 1; margin-bottom: 0;">キャンセル</button>
                <button class="btn" id="savePlayerBtn" style="flex: 2; margin-bottom: 0;">保存する</button>
            </div>
        </div>

        <div class="filter-panel">
            <div class="filter-title">▼ 選手を絞り込む</div>
            
            <div class="form-group">
                <label>ポジション適性（サブポジ含む）</label>
                <div class="custom-select-wrapper" id="filterPosSelectWrapper">
                    <input type="hidden" id="filterPosSelect" value="">
                    
                    <div class="custom-select-trigger" id="filterPosSelectTrigger" style="background-color: rgba(31, 41, 55, 0.9); color: white;">
                        <span id="filterPosSelectLabel">すべて表示</span>
                        <span class="arrow">▼</span>
                    </div>
                    
                    <div class="custom-options" id="filterPosOptionsList">
                    </div>
                </div>
            </div>

            <div class="form-group" style="margin-bottom: 0;">
                <label>アビリティ発動条件（複数選択可）</label>
                <div class="ability-condition-group">
                    <div class="filter-ability-btn" data-cond="HOME">HOME</div>
                    <div class="filter-ability-btn" data-cond="AWAY">AWAY</div>
                    <div class="filter-ability-btn" data-cond="CUP">CUP</div>
                    <div class="flex-break"></div>
                    <div class="filter-ability-btn" data-cond="途中出場">途中出場</div>
                    <div class="filter-ability-btn" data-cond="勝っている">勝っている</div>
                    <div class="filter-ability-btn" data-cond="負けている">負けている</div>
                </div>
            </div>
        </div>

        <div id="playerList">
            </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>

    <script src="data.js"></script>
    <script src="main.js"></script>
</body>
</html>